{% ckan_extends %}

{% block resource_additional_information_inner %}
  {{ super() }}
  <div class="module-content">
    <h2>{{ _('Audit') }}</h2>
    <table id="myTable" class="table table-striped table-bordered table-condensed" data-module="table-toggle-more">
      <thead>
        <tr>
          <th scope="col">{{ _('Event') }}</th>
          <th scope="col">{{ _('Timestamp') }}</th>
          <th scope="col">{{ _('User ID') }}</th>
        </tr>
      </thead>
      <tbody>
        {% set audits = h.get_audit_trail(res) %}
        {% for audit in audits[:10] %}
          <tr>
            <td>{{ audit.event }}</td>
            <td>{{ audit.timestamp }}</td>
            <td>{{ audit.userId }}</td>
          </tr>
        {% endfor %}
        {% for audit in audits[10:] %}
          <tr class="toggle-more">
            <td>{{ audit.event }}</td>
            <td>{{ audit.timestamp }}</td>
            <td>{{ audit.userId }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
